(()=>{"use strict";var t,e={928:(t,e,o)=>{const n=window.wp.blocks,i=window.React,s=window.wp.i18n,a=window.wp.element,r=window.wp.blockEditor,p=window.wp.components,l=window.wp.data,c=JSON.parse('{"u2":"create-block/vk-option-text"}'),u=window.wp.apiFetch;var d=o.n(u);const v={options:{}},O="SET_OPTIONS",g=(0,l.createReduxStore)("vk-option-text/options",{reducer:(t=v,e)=>e.type===O?{...t,options:e.value}:t,actions:{setOptions:t=>({type:O,value:t}),updateOptions:t=>async({dispatch:e})=>{await d()({path:"vk-option-text/v2/settings",method:"POST",data:t}),e.setOptions(t)}},selectors:{getOptions:t=>t.options},resolvers:{getOptions:()=>async({dispatch:t})=>{try{const e=await d()({path:"vk-option-text/v2/settings",method:"GET"});t.setOptions(e)}catch(t){}}}});(0,l.register)(g),(0,n.registerBlockType)(c.u2,{edit:function(){const[t,e]=(0,a.useState)(!1),o=()=>e(!1),{options:n,setOptions:c,isLoading:u}=(()=>{const[t,e]=(0,a.useState)({}),[o,n]=(0,a.useState)(!0),i=(0,l.useSelect)((t=>{const e=t("vk-option-text/options");return{options:e.getOptions(),isLoading:e.isResolving("getOptions")}}));return(0,a.useEffect)((()=>{!i.isLoading&&i.options&&0===Object.keys(t).length&&(e(i.options),n(!1))}),[i]),{options:t,setOptions:e,isLoading:o}})(),{updateOptions:d}=(0,l.useDispatch)("vk-option-text/options"),v=(0,a.useCallback)((()=>{d(n).then((()=>{alert("Settings saved")}))}),[n,d]);return(0,i.createElement)(i.Fragment,null,t&&(0,i.createElement)(p.Modal,{onRequestClose:o,title:"Edit options"},u?(0,i.createElement)("p",null,"Loading..."):(0,i.createElement)(i.Fragment,null,Object.keys(n).map(((t,e)=>(0,i.createElement)(p.TextControl,{key:e,label:`Option Text ${e+1}`,value:n[t],onChange:e=>{c({...n,[t]:e})}}))),(0,i.createElement)(p.Button,{variant:"primary",onClick:v,isBusy:u},"Save setting"),(0,i.createElement)(p.Button,{onClick:o,variant:"tertiary"},"Cancel"))),(0,i.createElement)(r.InspectorControls,null,(0,i.createElement)(p.PanelBody,{title:(0,s.__)("Global Settings")},(0,i.createElement)(p.Button,{onClick:()=>e(!0),variant:"primary"},"Options"))),(0,i.createElement)("p",{...(0,r.useBlockProps)()},(0,s.__)("Vk Option Text â€“ hello from the editor!","vk-option-text")))}})}},o={};function n(t){var i=o[t];if(void 0!==i)return i.exports;var s=o[t]={exports:{}};return e[t](s,s.exports,n),s.exports}n.m=e,t=[],n.O=(e,o,i,s)=>{if(!o){var a=1/0;for(c=0;c<t.length;c++){for(var[o,i,s]=t[c],r=!0,p=0;p<o.length;p++)(!1&s||a>=s)&&Object.keys(n.O).every((t=>n.O[t](o[p])))?o.splice(p--,1):(r=!1,s<a&&(a=s));if(r){t.splice(c--,1);var l=i();void 0!==l&&(e=l)}}return e}s=s||0;for(var c=t.length;c>0&&t[c-1][2]>s;c--)t[c]=t[c-1];t[c]=[o,i,s]},n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={826:0,431:0};n.O.j=e=>0===t[e];var e=(e,o)=>{var i,s,[a,r,p]=o,l=0;if(a.some((e=>0!==t[e]))){for(i in r)n.o(r,i)&&(n.m[i]=r[i]);if(p)var c=p(n)}for(e&&e(o);l<a.length;l++)s=a[l],n.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return n.O(c)},o=globalThis.webpackChunkvk_option_text=globalThis.webpackChunkvk_option_text||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))})();var i=n.O(void 0,[431],(()=>n(928)));i=n.O(i)})();